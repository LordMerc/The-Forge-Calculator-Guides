name: Trigger Main Repo Build

on:
  pull_request:
    types: [closed]
    branches:
      - main

jobs:
  trigger:
    runs-on: ubuntu-latest
    # Only run when PR is merged (not just closed)
    if: github.event.pull_request.merged == true
    steps:
      - name: Trigger main repo rebuild
        uses: peter-evans/repository-dispatch@v3
        with:
          token: ${{ secrets.MAIN_REPO_TOKEN }}
          repository: LordMerc/The-Forge-Calculator
          event-type: guides-updated
